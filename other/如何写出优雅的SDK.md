## 如何构建一个优雅扩展

- 作者: blankqwq
- 时间: 20200630
- 邮箱: 1136589038@qq.com

> ### SDK 是什么

    SDK是对基础程序库(函数库)的一种封装，又称之为`软件开发工具包`。
    
    SDK是一种DSL(Domain Specific Language)领域特定语言，对某需求的使用性阐述语言

> ### SDK 的类型

根据不同的应用场景可以分为一下几种类型：

- 应用上划分
    - 对接类型：将要对接的某些接口封装起来，例如`easywechart`,`pay`
    - 功能类型：实现某类系统/特殊功能的调用`guzzleHttp`
    - 规范类型：为某些服务提供对于扩展的规范，大部分为接口,`psr/log`
    - 插件类型：未某些框架提供额外功能/优化功能,`jqhph/laravel-wherehasin`,`laravel-admin的插件等`
- 规模上划分
    - 工具类型：模型较为单一，没有太多的模型进行复合，例如`ml`,`factoryCode`,`supports`
    - 组件类型：多个模型组合所形成的扩展,提供某功能的一整套/完整的解决方案 例如`symphony-console`的多种组件,`laravel-s`,`pay`,`easywechart`,`laravel-pay`
    - 框架类型: 多种组件的组合,已经脱离了我们的sdk范围,`laravel/framework`,`thinphp/framework`,`blankphp/framework`
- 使用上划分
    - 每个子模块都可以单独运行
    - 通过特定模块使用入口进行执行
    - 依赖其他组件(在框架中)才可运行(一般我们会针对框架进行适配)
- DSL类型上划分
    - 内部DSL，用宿主语言实现，例如`psr`
    - 外部DSL，自己设计的调用方式，例如`easywechart`



> ### 案例分析

下面将以一个实例来说明sdk建模与分析的过程

```
graph LR
需求分析-->类型分析
类型分析-->应用
类型分析-->规模
类型分析-->使用
应用-->构建模型
规模-->构建模型
使用-->构建模型
构建模型-->接口定义
接口定义-->实现
实现-->文档
```

> 开发SDK第一步，准确划分类型和具体规模

需求：从指定接口获取我们想要的数据


- 类型分析
    - 根据主要需求，获取xxx系统接口的数据，且无需对框架进行适配，说明组要是对接类型。
    - 从当前规模上划分，该sdk目前属于工具类型,模型单一只有获取数据接口,无需额外提供日志/特殊服务


类型明确后，我们的模型才能更加精准，拓展的解耦方式有很多，可以

> ##### 根据类型合理建模建模


```
graph LR
A-->B
```

> 开始设计


```
graph LR
A-->B
```


> 文档编写

一份友好的文档应该包含下面这些信息：

- 项目简介及创作动机
- 项目维护、CI、依赖更新状态（如果有）
- features & 适用人群
- 重要依赖(环境版本,要求等)
- 根据接口的量提供不同的文档类型
    - 简单
        - 快速使用
        - 如何安装与测试
        - 程序api
        - 参与开发指南
    - 使用示例及文档地址
- 贡献指南
- License
- 鸣谢
- 其它特有的信息

#### 例如

> Tag规范


| header 1    | header 2    |
| ----------- | ----------- |
| row 1 col 1 | row 1 col 2 |
| row 2 col 1 | row 2 col 2 |



> 碰到的问题

1. 

### 总结